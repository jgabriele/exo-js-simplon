<html>
  <head>
    <title>Load users</title>
  </head>
  <style>
    .loading {
      display: none
    }

    .loading.visible {
      display: block;
    }
  </style>
  <body>
    
    <button id="load-user-button">Load users</button>

    <img class="loading" src="loading.gif" alt="Loading" />
    
    <script>
      // Our function to hide the loading element
      function hideLoading() {
        document.querySelector('.loading').classList.remove('visible')
      }

      // Our function to get users from backend
      function getUsersFromBackend() {
        const req = new XMLHttpRequest();
        req.open('GET', 'https://reqres.in/api/users?delay=3&per_page=10');
        req.onload = function (event) {
          // We parse the JSON response to get a javascript object
          const users = JSON.parse(event.target.response).data

          // We filter out persons with first name containing the letter "e"
          const usersWithE = users.filter(function(user) {
            return user.first_name.includes('e')
          })

          console.log(usersWithE)

          hideLoading()
        }
        req.send(null);
      }

      // We add a listener on the Load user button's click
      function onClick() {
        document.querySelector('.loading').classList.add('visible')

        // We are going to call our backend to get users data
        getUsersFromBackend()
      }
      
      document.querySelector('#load-user-button').addEventListener('click', onClick)

    </script>
  </body>
  </html>


